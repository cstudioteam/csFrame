version: "3.6"
services:
  libreoffice:
    image: libreoffice/online:master
    environment:
      domain: (localhost|127\.0\.0\.1|host\.docker\.internal)
      username: admin
      password: secret
#      extra_params: --o:ssl.enable=false --o:ssl.termination=false
      extra_params: '--o:ssl.enable=false --o:net.post_allow.host[0]=::ffff:172.[0-9]+.[0-9]+.[0-9]+'
      DONT_GEN_SSL_CERT: 1
    volumes:
      - lo_config_volume:/etc/loolwsd
    cap_add:
      - MKNOD
    ports:
      - "127.0.0.1:9980:9980"
    restart:
      unless-stopped
volumes:
  lo_config_volume: