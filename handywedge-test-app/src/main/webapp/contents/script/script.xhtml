<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:jsf="http://xmlns.jcp.org/jsf"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  template="/layout/layout.xhtml"
>
  <ui:define name="title">JavaScript</ui:define>
  <ui:define name="extHeader">
    <style type="text/css">
.ui-panelgrid>*>tr, .ui-panelgrid .ui-panelgrid-cell {
	border: none;
}
</style>
  </ui:define>
  <ui:define name="content">
    <h3>スクリプト連携</h3>
    <div></div>
    <p:panelGrid columns="2">
      <p:outputLabel
        for="language"
        value="スクリプト言語"
      />
      <p:selectOneMenu id="language" value="#{script.shortName}" >
        <p:ajax listener="#{script.onLanguageChange}" update="script1, script2" />
		<f:selectItems value="#{script.languages}" />
	  </p:selectOneMenu>
    </p:panelGrid>

    <h4>Eval実行</h4>
    <p:panelGrid columns="2">
      <p:outputLabel
        for="script1"
        value="スクリプト"
      />
      <p:inputTextarea rows="3" cols="75"
        id="script1"
        value="#{script.script1}"
      />
      <h:commandButton
        value="実行"
        action="#{script.eval}"
        update="result1"
      />
      <p:outputLabel/>
      <p:outputLabel
        for="result1"
        value="実行結果"
      />
      <div jsf:id="result1">
        <h:outputText value="#{script.result1}" />
      </div>
    </p:panelGrid>

    <p:separator />

    <div></div>
    <h4>Function呼び出し</h4>
    <p:panelGrid columns="2">
      <p:outputLabel
        for="script2"
        value="スクリプト"
      />
      <p:inputTextarea rows="5" cols="75"
        id="script2"
        value="#{script.script2}"
      />
      <p:outputLabel
        for="arg1"
        value="arg1"
      />
      <p:inputText
        id="arg1"
        value="#{script.arg1}"
      />
      <p:outputLabel
        for="arg2"
        value="arg2"
      />
      <p:inputText
        id="arg2"
        value="#{script.arg2}"
      />
      <h:commandButton
        value="実行"
        action="#{script.callFunction}"
        update="data2"
      />
      <p:outputLabel
        value="関数名は「f」、引数は2個固定です。"
      />
      <p:outputLabel
        for="result2"
        value="実行結果"
      />
      <div jsf:id="result2">
        <h:outputText value="#{script.result2}" />
      </div>
    </p:panelGrid>
  </ui:define>
</ui:composition>