<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  template="/layout/layout.xhtml"
>
  <ui:define name="title">ワークフロー詳細サンプル</ui:define>
  <ui:define name="extHeader">
  </ui:define>
  <ui:define name="content">
    <f:metadata>
      <f:viewParam name="selectId" value="#{workflowDetail.selectId}"/>
      <f:viewAction action="#{workflowDetail.init()}"/>
    </f:metadata>
    <span>※ログイン者のロールに応じ実施可能なActionが変わります</span>
    <br />
    <br />
    <span>あなたのロールは「<h:outputText value="#{workflowDetail.user.role}" />」です</span>
    <p:panelGrid id="panel">
      <p:row>
        <p:column>
          <p:outputLabel value="ID" />
        </p:column>
        <p:column>
          <h:outputText value="#{workflowDetail.workflow.id}" />
        </p:column>
      </p:row>
      <p:row>
        <p:column>
          <p:outputLabel value="タイトル" />
        </p:column>
        <p:column>
          <h:outputText value="#{workflowDetail.workflow.subject}" />
        </p:column>
      </p:row>
      <p:row>
        <p:column>
          <p:outputLabel value="ステータス" />
        </p:column>
        <p:column>
          <h:outputText value="#{workflowDetail.workflow.statusName}" />
        </p:column>
      </p:row>
      <p:row>
        <p:column>
          <p:outputLabel value="作成日時" />
        </p:column>
        <p:column>
          <h:outputText value="#{workflowDetail.workflow.createDate}">
            <f:convertDateTime  pattern="yyyy/MM/dd HH:mm:ss" timeZone="JST" />
          </h:outputText>
        </p:column>
      </p:row>
      <p:row>
        <p:column>
          <p:outputLabel value="最終更新日時" />
        </p:column>
        <p:column>
          <h:outputText value="#{workflowDetail.workflow.updateDate}">
            <f:convertDateTime  pattern="yyyy/MM/dd HH:mm:ss" timeZone="JST" />
          </h:outputText>
        </p:column>
      </p:row>
    </p:panelGrid>
    <br />
    <br />
    <p:commandButton
      value="#{workflowDetail.agreeAction.action}"
      action="#{workflowDetail.agree()}"
      rendered="#{workflowDetail.agreeActionFlag}"
    />
    <p:commandButton
      value="#{workflowDetail.disagreeAction.action}"
      action="#{workflowDetail.disagree()}"
      rendered="#{workflowDetail.disagreeActionFlag}"
    />
    <p:separator />
    <h:commandLink action="/contents/workflow/workflowView.xhtml" style="color: #0000ff;">
      <h:outputText value="戻る"/>
    </h:commandLink>
  </ui:define>
</ui:composition>